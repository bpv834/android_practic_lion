# Coroutine

- 쓰래드 내에서 다수의 작업을 동시에 처리하고자 할 때 사용한다.
- 화면 작업에 대한 처리가 매우 빨리 끝나기 때문에 사용자가 발생시킨 쓰래드서 runOnUiThread를 이용해 화면처리작업을 요청하면 된다.
- 안드로이드 앱 개발시에는 네트워크에 관련된 작업 처럼 콜백 지옥에 빠질 수있는 작업을 처리하는데 사용한다.

# 코루틴 스코프
- 발생시키는 코루틴을 언제까지 사용할 것인지에 대한 범위를 지정한다.
- 코루틴 스코프를 정한다고 해서 andorid os가 강제로 종료하는 것은 아니다.
- 다면 스코프에 맞게 메모리와 처리에 대한 관리를 다르게 해준다.

### GlobalScope
- 실행단위(Activity 등등)의 생명주기(정확히는 코루틴을 발생시킨 쓰래드)와 함께 동작한다.
- 코루틴을 발생시키는 쓰래드 종료되면 코루틴도 종료된다(모든 스코프의 코루틴이 동일하다)
- 어플이 시작될 때 부터 끝날때까지 혹은 장기간 동작해야 하는 코루틴이 있다면 GlobalScope를 사용한다.
- 장시간 운영될 수 있도록 메모리 등을 준비 해준다.

### CoroutineScope
- 필요할때만 잠깐 사용하는 코루틴을 발생시킬때 사용한다.
- 코루틴이 끝나면 바로 메모리상에서 소멸시켜 버린다.

### ViewModelScope
- Jetpack Compose 에서 MVVM 패턴을 이용할 때 사용하는 스코프이다.
- 화면 작업이 끝나면 소멸되는 코루틴이다.

---

# 코루틴 디스패처
- 실행되는 코루틴을 어디에서 발생시킬 것인지를 정한다

### Dispatchers.Default
- 프로그램이 시작되면 VM이 정한 기본 쓰래드 내에서 코루틴이 발생한다.
- 안드로이드인 경우 Main Thread가 된다.
- CPU를 많이 사용하는 작업에 최적화 되어 있다(대용량의 데이데에 대한 정렬이나 복잡한 연산 등)

### Dispatchers.IO
- 새로운 쓰래드가 발생하여 그 안에서 코루틴을 발생시킨다.
- 데이터 입출력을 위해 최적화 되어 있다.
- 파일 입출력, 서버와의 통신 등등

### Dispatchers.Main
- 안드로이드인 경우 Main Thread에서 코루틴을 발생시킨다.
- 화면 처리에 최적화되어 있다.


